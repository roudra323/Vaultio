services:
  hardhat:
    build:
      context: ./contracts
      dockerfile: Dockerfile
    ports:
      - "8545:8545"
    volumes:
      - ./contracts/contracts:/app/contracts
      - ./contracts/scripts:/app/scripts
      - ./contracts/test:/app/test
      - ./contracts/ignition:/app/ignition
    stdin_open: true
    tty: true

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    env_file:
      - ./frontend/.env.local
    environment:
      - NEXT_PUBLIC_HARDHAT_RPC_URL=http://localhost:8545
    volumes:
      - ./frontend/src:/app/src
      - ./frontend/public:/app/public
    depends_on:
      - hardhat

